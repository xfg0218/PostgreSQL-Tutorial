**摘要**: 在本教程中，你将学习如何为自己的应用程序设计 `PostgreSQL` 数据库。

# 业务需求

我们将为一个简单的库存管理系统设计数据库。

让我们从业务需求开始：

"我们的库存管理系统使仓库用户能够高效管理多个仓库的库存。"

它简化了产品管理，使用户能够有效地跨标签、类别和品牌处理产品。

此外，该系统会记录所有的货物收发交易，确保库存管理的顺畅和高效。

# 重要问题

要为库存管理系统设计数据库，你需要问以下重要问题：

- 数据库应该包含哪些表 ？
- 这些表之间有什么关系 ？

# 识别表

库存系统允许多个用户访问并执行库存管理任务，因此数据库应该有一个名为 `users` 的表。

每个用户可能都有一个个人资料，用于存储额外信息，如名、姓和电话。因此，数据库应该有一个名为 `profiles` 的表。

系统需要管理多个仓库。为了跟踪这些仓库，我们可以创建一个 `warehouses` 表。

库存系统跨标签、品牌和类别管理多种产品，因此数据库还需要四个表：`tags`、 `brands` 、`categories` 和 `products` 。

当仓库工作人员接收或发放产品时，他们会记录这些交易。数据库应该有一个 `transactions` 表来记录这些交易。

为了更细致地查看各仓库的产品数量，我们可以创建一个名为 `inventories` 的表格。

# 表关系

让我们找出表之间的关系。

## 一对一关系

每个用户都有一个个人资料，且一个个人资料与一个用户相关联。用户和个人资料之间的关系是一对一的。

在 `PostgreSQL` 中，`users` 表中的每一行在 `profiles` 表中都有对应的一行。

## 一对多关系

每个品牌都有许多产品，而一款产品只属于一个品牌。品牌和产品之间的关系是一对多。

同样地，每个类别都有许多产品，每个产品都属于一个类别。类别和产品之间的关系是一对多。

在 `PostgreSQL` 中，`categories` 表中的一行与 `products` 表中的多行相关联。同样，`brands` 表中的一行与 `products` 表中的多行相关。

一个用户可以记录零笔或多笔交易，而一笔交易只能由一个用户记录。因此，用户和交易之间的关系是一对多。

一个仓库可能有多个交易，而一个交易只属于一个仓库。仓库和交易之间的关系是一对多。

一个产品可能有多个交易，而一个交易属于一个产品。产品和交易之间的关系是一对多。

一个类别可以有子类别。类别和子类别之间的关系是一对多。我们可以使用同一个类别表来存储类别和子类别。

## 多对多关系

一个产品有一个或多个标签，一个标签有多个产品。产品和标签之间的关系是多对多。

在 `PostgreSQL` 中，我们可以通过创建一个名为 `product_tags` 的链接表，使用两个一对多关系来建模多对多关系。

